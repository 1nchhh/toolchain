#include "vargfx.h"
#include <fileioc.h>

#define vargfx_HEADER_SIZE 35

unsigned char *vargfx_appvar[2] =
{
    (unsigned char*)35,
    (unsigned char*)547,
};

unsigned char *image_tiles_compressed[300] =
{
    (unsigned char*)0,
    (unsigned char*)238,
    (unsigned char*)451,
    (unsigned char*)709,
    (unsigned char*)908,
    (unsigned char*)1082,
    (unsigned char*)1315,
    (unsigned char*)1516,
    (unsigned char*)1731,
    (unsigned char*)1959,
    (unsigned char*)2177,
    (unsigned char*)2411,
    (unsigned char*)2632,
    (unsigned char*)2857,
    (unsigned char*)3074,
    (unsigned char*)3194,
    (unsigned char*)3345,
    (unsigned char*)3499,
    (unsigned char*)3601,
    (unsigned char*)3763,
    (unsigned char*)3937,
    (unsigned char*)4108,
    (unsigned char*)4291,
    (unsigned char*)4481,
    (unsigned char*)4602,
    (unsigned char*)4750,
    (unsigned char*)4960,
    (unsigned char*)5166,
    (unsigned char*)5353,
    (unsigned char*)5579,
    (unsigned char*)5800,
    (unsigned char*)6032,
    (unsigned char*)6264,
    (unsigned char*)6482,
    (unsigned char*)6680,
    (unsigned char*)6891,
    (unsigned char*)7084,
    (unsigned char*)7272,
    (unsigned char*)7450,
    (unsigned char*)7632,
    (unsigned char*)7730,
    (unsigned char*)7922,
    (unsigned char*)8102,
    (unsigned char*)8292,
    (unsigned char*)8491,
    (unsigned char*)8703,
    (unsigned char*)8894,
    (unsigned char*)9079,
    (unsigned char*)9253,
    (unsigned char*)9421,
    (unsigned char*)9590,
    (unsigned char*)9763,
    (unsigned char*)9938,
    (unsigned char*)10117,
    (unsigned char*)10281,
    (unsigned char*)10471,
    (unsigned char*)10625,
    (unsigned char*)10810,
    (unsigned char*)11012,
    (unsigned char*)11193,
    (unsigned char*)11381,
    (unsigned char*)11536,
    (unsigned char*)11692,
    (unsigned char*)11846,
    (unsigned char*)11999,
    (unsigned char*)12135,
    (unsigned char*)12300,
    (unsigned char*)12477,
    (unsigned char*)12658,
    (unsigned char*)12838,
    (unsigned char*)13081,
    (unsigned char*)13323,
    (unsigned char*)13568,
    (unsigned char*)13794,
    (unsigned char*)13946,
    (unsigned char*)14072,
    (unsigned char*)14201,
    (unsigned char*)14349,
    (unsigned char*)14510,
    (unsigned char*)14682,
    (unsigned char*)14815,
    (unsigned char*)14968,
    (unsigned char*)15146,
    (unsigned char*)15371,
    (unsigned char*)15601,
    (unsigned char*)15777,
    (unsigned char*)15918,
    (unsigned char*)16093,
    (unsigned char*)16268,
    (unsigned char*)16486,
    (unsigned char*)16676,
    (unsigned char*)16883,
    (unsigned char*)17088,
    (unsigned char*)17312,
    (unsigned char*)17548,
    (unsigned char*)17740,
    (unsigned char*)17929,
    (unsigned char*)18098,
    (unsigned char*)18244,
    (unsigned char*)18398,
    (unsigned char*)18571,
    (unsigned char*)18823,
    (unsigned char*)19089,
    (unsigned char*)19329,
    (unsigned char*)19528,
    (unsigned char*)19735,
    (unsigned char*)19993,
    (unsigned char*)20227,
    (unsigned char*)20447,
    (unsigned char*)20635,
    (unsigned char*)20826,
    (unsigned char*)21011,
    (unsigned char*)21208,
    (unsigned char*)21381,
    (unsigned char*)21550,
    (unsigned char*)21786,
    (unsigned char*)22049,
    (unsigned char*)22307,
    (unsigned char*)22555,
    (unsigned char*)22805,
    (unsigned char*)23010,
    (unsigned char*)23274,
    (unsigned char*)23519,
    (unsigned char*)23753,
    (unsigned char*)23993,
    (unsigned char*)24244,
    (unsigned char*)24455,
    (unsigned char*)24723,
    (unsigned char*)24973,
    (unsigned char*)25224,
    (unsigned char*)25465,
    (unsigned char*)25702,
    (unsigned char*)25935,
    (unsigned char*)26187,
    (unsigned char*)26432,
    (unsigned char*)26646,
    (unsigned char*)26896,
    (unsigned char*)27154,
    (unsigned char*)27409,
    (unsigned char*)27673,
    (unsigned char*)27928,
    (unsigned char*)28194,
    (unsigned char*)28443,
    (unsigned char*)28655,
    (unsigned char*)28892,
    (unsigned char*)29149,
    (unsigned char*)29407,
    (unsigned char*)29645,
    (unsigned char*)29894,
    (unsigned char*)30129,
    (unsigned char*)30381,
    (unsigned char*)30609,
    (unsigned char*)30843,
    (unsigned char*)31096,
    (unsigned char*)31332,
    (unsigned char*)31539,
    (unsigned char*)31750,
    (unsigned char*)31994,
    (unsigned char*)32242,
    (unsigned char*)32507,
    (unsigned char*)32771,
    (unsigned char*)33022,
    (unsigned char*)33304,
    (unsigned char*)33534,
    (unsigned char*)33763,
    (unsigned char*)33992,
    (unsigned char*)34148,
    (unsigned char*)34367,
    (unsigned char*)34560,
    (unsigned char*)34762,
    (unsigned char*)35016,
    (unsigned char*)35254,
    (unsigned char*)35505,
    (unsigned char*)35755,
    (unsigned char*)35973,
    (unsigned char*)36228,
    (unsigned char*)36430,
    (unsigned char*)36669,
    (unsigned char*)36920,
    (unsigned char*)37158,
    (unsigned char*)37420,
    (unsigned char*)37643,
    (unsigned char*)37912,
    (unsigned char*)38148,
    (unsigned char*)38375,
    (unsigned char*)38577,
    (unsigned char*)38769,
    (unsigned char*)39001,
    (unsigned char*)39177,
    (unsigned char*)39346,
    (unsigned char*)39538,
    (unsigned char*)39742,
    (unsigned char*)39994,
    (unsigned char*)40237,
    (unsigned char*)40457,
    (unsigned char*)40674,
    (unsigned char*)40915,
    (unsigned char*)41160,
    (unsigned char*)41419,
    (unsigned char*)41679,
    (unsigned char*)41938,
    (unsigned char*)42197,
    (unsigned char*)42448,
    (unsigned char*)42721,
    (unsigned char*)42951,
    (unsigned char*)43165,
    (unsigned char*)43355,
    (unsigned char*)43526,
    (unsigned char*)43687,
    (unsigned char*)43866,
    (unsigned char*)44096,
    (unsigned char*)44310,
    (unsigned char*)44497,
    (unsigned char*)44676,
    (unsigned char*)44864,
    (unsigned char*)45068,
    (unsigned char*)45317,
    (unsigned char*)45546,
    (unsigned char*)45778,
    (unsigned char*)46050,
    (unsigned char*)46268,
    (unsigned char*)46528,
    (unsigned char*)46776,
    (unsigned char*)47052,
    (unsigned char*)47310,
    (unsigned char*)47519,
    (unsigned char*)47731,
    (unsigned char*)47903,
    (unsigned char*)48096,
    (unsigned char*)48292,
    (unsigned char*)48499,
    (unsigned char*)48662,
    (unsigned char*)48843,
    (unsigned char*)48998,
    (unsigned char*)49144,
    (unsigned char*)49312,
    (unsigned char*)49556,
    (unsigned char*)49793,
    (unsigned char*)50050,
    (unsigned char*)50277,
    (unsigned char*)50499,
    (unsigned char*)50755,
    (unsigned char*)51026,
    (unsigned char*)51268,
    (unsigned char*)51544,
    (unsigned char*)51764,
    (unsigned char*)51998,
    (unsigned char*)52224,
    (unsigned char*)52439,
    (unsigned char*)52654,
    (unsigned char*)52857,
    (unsigned char*)53065,
    (unsigned char*)53254,
    (unsigned char*)53426,
    (unsigned char*)53600,
    (unsigned char*)53869,
    (unsigned char*)54115,
    (unsigned char*)54341,
    (unsigned char*)54588,
    (unsigned char*)54829,
    (unsigned char*)55056,
    (unsigned char*)55311,
    (unsigned char*)55583,
    (unsigned char*)55844,
    (unsigned char*)56105,
    (unsigned char*)56372,
    (unsigned char*)56581,
    (unsigned char*)56807,
    (unsigned char*)57017,
    (unsigned char*)57263,
    (unsigned char*)57517,
    (unsigned char*)57772,
    (unsigned char*)58028,
    (unsigned char*)58263,
    (unsigned char*)58521,
    (unsigned char*)58769,
    (unsigned char*)59019,
    (unsigned char*)59245,
    (unsigned char*)59441,
    (unsigned char*)59610,
    (unsigned char*)59788,
    (unsigned char*)59994,
    (unsigned char*)60237,
    (unsigned char*)60497,
    (unsigned char*)60748,
    (unsigned char*)61013,
    (unsigned char*)61277,
    (unsigned char*)61514,
    (unsigned char*)61771,
    (unsigned char*)62027,
    (unsigned char*)62273,
    (unsigned char*)62499,
    (unsigned char*)62687,
    (unsigned char*)62835,
    (unsigned char*)63001,
    (unsigned char*)63176,
    (unsigned char*)63385,
    (unsigned char*)63582,
    (unsigned char*)63771,
    (unsigned char*)63967,
};

unsigned char vargfx_init(void)
{
    unsigned int data, i;
    ti_var_t appvar;

    ti_CloseAll();

    appvar = ti_Open("vargfx", "r");
    if (appvar == 0)
    {
        return 0;
    }

    data = (unsigned int)ti_GetDataPtr(appvar) - (unsigned int)vargfx_appvar[0] + vargfx_HEADER_SIZE;
    for (i = 0; i < 2; i++)
    {
        vargfx_appvar[i] += data;
    }

    ti_CloseAll();

    data = (unsigned int)vargfx_appvar[1] - (unsigned int)image_tiles_compressed[0];
    for (i = 0; i < image_tiles_num; i++)
    {
        image_tiles_compressed[i] += data;
    }

    return 1;
}

